############## BAR ############## 
sketchybar -m --bar height=24        \
                    blur_radius=50   \
                    position=top     \
                    padding_left=0  \
                    padding_right=0 \

############## GLOBAL DEFAULTS ############## 
source ~/.config/sketchybar/sketchybar_vars.sh
sketchybar -m --default updates=when_shown        \
                        drawing=on                \
                        icon.font="$FONT_AWESOME" \
                        label.font="$HELVETICA"   \
                        icon.color=$WHITE         \
                        label.color=$WHITE

############## DEFAULTS ###############
sketchybar -m --default background.padding_left=0  \
                        background.padding_right=0 \
                        background.height=24       \
                        icon.padding_left=8        \
                        icon.padding_right=8       \
                        icon.y_offset=0

############## EVENTS ##############
sketchybar -m --add event window_created    \
              --add event window_destroyed  \
              --add event window_focus      \
              --add event float_change      \
              --add event title_change      \
              --add event space_change      \
              --add event fullscreen_change \
              --add event front_app_switched

############## LEFT ITEMS ############## 
# Empty padding
source ~/.config/sketchybar/plugins/transition_right.sh $GRAY_DARK $GRAY_DARK

# Spaces
source ~/.config/sketchybar/plugins/yabai_spaces.sh
# Transition connector
source ~/.config/sketchybar/plugins/transition_right.sh $GRAY_DARK $YELLOW

# Yabai float indicator
sketchybar -m --add       item               yabai_float left                                                 \
              --set       yabai_float        script="~/.config/sketchybar/plugins/yabai_float.sh"             \
                                             click_script="~/.config/sketchybar/plugins/yabai_float_click.sh" \
                                             icon.color=$GRAY_DARK                                            \
                                             background.color=$YELLOW                                         \
              --subscribe yabai_float        front_app_switched window_focus float_change fullscreen_change

# Transition connector
source ~/.config/sketchybar/plugins/transition_right.sh $YELLOW $CLEAR

# Monitor - network
sketchybar -m --add item network_up left                                            \
              --set network_up    label.font="$HELVETICA_S"                         \
                                  icon.font="$FONT_AWESOME_S"                       \
                                  icon=                                            \
                                  icon.highlight_color=$RED                         \
                                  icon.padding_right=4                              \
                                  y_offset=6                                        \
                                  update_freq=2                                     \
                                  width=0                                           \
                                  script="~/.config/sketchybar/plugins/network.sh"  \
              --add item network_down left                                          \
              --set network_down  label.font="$HELVETICA_S"                         \
                                  icon.font="$FONT_AWESOME_S"                       \
                                  icon=                                            \
                                  icon.highlight_color=$BLUE                        \
                                  icon.padding_right=4                              \
                                  y_offset=-4

# VPN Status
sketchybar -m --add item vpn left                                                   \
              --set vpn           icon=""                                          \
                                  icon.drawing=off                                  \
                                  update_freq=5                                     \
                                  script="~/.config/sketchybar/plugins/vpn.sh"

############## RIGHT ITEMS ############## 
# Time
sketchybar -m --add item time right                                                 \
              --set               time update_freq=2                                \
                                  script="~/.config/sketchybar/plugins/time.sh"     \
                                  label.padding_right=10                            \
                                  icon.padding_left=0                               \
                                  background.color=$GRAY_DARK

source ~/.config/sketchybar/plugins/transition_left.sh $GRAY_DARK $YELLOW

# Date
sketchybar -m --add item date right                                                 \
              --set date          update_freq=60                                    \
                                  background.color=$YELLOW                          \
                                  label.color=$GRAY_DARK                            \
                                  label.padding_right=6                             \
                                  icon.padding_left=0                               \
                                  script="~/.config/sketchybar/plugins/date.sh"

source ~/.config/sketchybar/plugins/transition_left.sh $YELLOW $GRAY_LIGHT amphetamine_transition

# Amphetamine
sketchybar -m --add item amphetamine right                                          \
              --set amphetamine   update_freq=5                                     \
                                  background.color=$GRAY_LIGHT                      \
                                  icon.color=$GRAY_DARK                             \
                                  icon=""                                          \
                                  script="~/.config/sketchybar/plugins/amphetamine.sh"

source ~/.config/sketchybar/plugins/transition_left.sh $GRAY_LIGHT $GRAY_LIGHT amphetamine_battery_transition

# Battery                                  
sketchybar -m --add item battery right                                              \
              --set battery       update_freq=2                                     \
                                  icon.padding_right=4                              \
                                  label.color=$GRAY_DARK                            \
                                  icon.color=$GRAY_DARK                             \
                                  icon.padding_left=6                               \
                                  label.padding_right=6                             \
                                  script="~/.config/sketchybar/plugins/battery.sh"

source ~/.config/sketchybar/plugins/transition_left.sh $GRAY_LIGHT $GRAY_LIGHT battery_transition

# Weather
sketchybar -m --add item weather right                                             \
              --set weather       update_freq=600                                  \
                                  icon.padding_right=4                             \
                                  icon.font="$NERD_FONT"                           \
                                  icon.y_offset=2                                  \
                                  icon.color=$GRAY_DARK                            \
                                  label.color=$GRAY_DARK                           \
                                  label.padding_right=4                            \
                                  background.color=$GRAY_LIGHT                     \
                                  script="~/.config/sketchybar/plugins/weather.sh"

source ~/.config/sketchybar/plugins/transition_left.sh $GRAY_LIGHT $CLEAR battery_monitor_transition

sketchybar -m --set battery_monitor_transition background.padding_left=6

# Monitor - disk
sketchybar -m --add item disk_label right                               \
              --set disk_label    label.font="$HELVETICA_S"             \
                                  label=DSK                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item disk_percent right                             \
              --set disk_percent  label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/disk.sh"
                                  
# Monitor - RAM
sketchybar -m --add item ram_label right                                \
              --set ram_label     label.font="$HELVETICA_S"             \
                                  label=RAM                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item ram_percent right                              \
              --set ram_percent   label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/ram.sh"

# Monitor - CPU
sketchybar -m --add item cpu_label right                                \
              --set cpu_label     label.font="$HELVETICA_S"             \
                                  label=CPU                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item cpu_percent right                              \
              --set cpu_percent   label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/cpu.sh"

###################### CENTER ITEMS ###################
# Window title bar
sketchybar --add item  system.label       center                                 \
           --set       system.label       label=Window                         \
                                          script="~/.config/sketchybar/plugins/window_title.sh" \
           --subscribe system.label       front_app_switched display_change window_focus space_change title_change

# Yabai stack indicator
sketchybar -m --add       item           stack center                                          \
              --set       stack          script="~/.config/sketchybar/plugins/stack.sh"        \
              --subscribe stack          window_focus front_app_switched space_change title_change \
              --set       stack          drawing=on                                            \
              --set       stack          update_freq=0                                         \
              --set       stack          background.padding_left=0

############## TEST ITEMS ##############
# Battery alias
#sketchybar -m --add alias "Control Center,Battery" left \
#              --set "Control Center,Battery" update_freq=2

############## FINALIZING THE SETUP ##############
sketchybar -m --update

echo "sketchybar configuration loaded.."
