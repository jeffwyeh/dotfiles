############## BAR ############## 
sketchybar -m --bar height=24        \
                    blur_radius=50   \
                    position=top     \
                    padding_left=10  \
                    padding_right=10 \

############## GLOBAL DEFAULTS ############## 
source ~/.config/sketchybar/sketchybar_vars.sh
sketchybar -m --default updates=when_shown        \
                        drawing=on                \
                        icon.font="$FONT_AWESOME" \
                        label.font="$HELVETICA"   \
                        icon.color=$WHITE         \
                        label.color=$WHITE

############## DEFAULTS ###############
sketchybar -m --default background.padding_left=8  \
                        background.padding_right=8 \
                        icon.y_offset=-1

############## EVENTS ##############
sketchybar -m --add event window_created    \
              --add event window_destroyed  \
              --add event window_focus      \
              --add event float_change      \
              --add event title_change      \
              --add event space_change      \
              --add event fullscreen_change \
              --add event front_app_switched

############## LEFT ITEMS ############## 
# Spaces
echo "Add space"
sketchybar -m --add       item           yabai_spaces left                                     \
              --set       yabai_spaces   drawing=off                                           \
                                         updates=on                                            \
                                         script="~/.config/sketchybar/plugins/yabai_spaces.sh" \
              --subscribe yabai_spaces   space_change window_created window_destroyed          \
              --add       item           space_template left                                   \
              --set       space_template icon.highlight_color=$BLUE                            \
                                         icon.font="$HELVETICA"                                \
                                         drawing=off                                           \
                                         click_script="yabai -m space --focus \$NAME"

echo "Add float"
# Yabai float indicator
sketchybar -m --add       item               yabai_float left                                                 \
              --set       yabai_float        script="~/.config/sketchybar/plugins/yabai_float.sh"             \
                                             click_script="~/.config/sketchybar/plugins/yabai_float_click.sh" \
                                             icon.color=$GRAY                                                 \
              --subscribe yabai_float        front_app_switched window_focus float_change fullscreen_change

# Monitor - network
sketchybar -m --add item network_up left                                            \
              --set network_up    label.font="$HELVETICA_S"                         \
                                  icon.font="$FONT_AWESOME_S"                       \
                                  icon=                                            \
                                  icon.highlight_color=$RED                         \
                                  y_offset=6                                        \
                                  width=0                                           \
                                  update_freq=2                                     \
                                  icon.padding_right=4                              \
                                  script="~/.config/sketchybar/plugins/network.sh"  \
              --add item network_down left                                          \
              --set network_down  label.font="$HELVETICA_S"                         \
                                  icon.font="$FONT_AWESOME_S"                       \
                                  icon=                                            \
                                  icon.highlight_color=$BLUE                        \
                                  icon.padding_right=4                              \
                                  y_offset=-4

############## RIGHT ITEMS ############## 
# Date and time
sketchybar -m --add item time right                                                 \
              --set               time update_freq=2                                \
                                  script="~/.config/sketchybar/plugins/time.sh"     \
                                  background.padding_left=0                         \
              --add item date right                                                 \
              --set date          update_freq=60                                    \
                                  background.color=$GRAY_LIGHT                      \
                                  label.color=$GRAY_DARK                            \
                                  background.height=15                              \
                                  background.corner_radius=4                        \
                                  icon.padding_left=6                               \
                                  label.padding_right=6                             \
                                  script="~/.config/sketchybar/plugins/date.sh"

# Amphetamine
sketchybar -m --add item amphetamine right                                          \
              --set amphetamine   update_freq=10                                    \
                                  script="~/.config/sketchybar/plugins/amphetamine.sh"

# Battery                                  
sketchybar -m --add item battery right                                              \
              --set battery       update_freq=10                                    \
                                  icon.padding_right=4                              \
                                  label.color=$GRAY_DARK                            \
                                  icon.color=$GRAY_DARK                             \
                                  background.height=15                              \
                                  background.corner_radius=4                        \
                                  icon.padding_left=6                               \
                                  label.padding_right=6                             \
                                  script="~/.config/sketchybar/plugins/battery.sh"

# Monitor - disk
sketchybar -m --add item disk_label right                               \
              --set disk_label    label.font="$HELVETICA_S"             \
                                  label=DSK                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item disk_percent right                             \
              --set disk_percent  label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/disk.sh"
                                  
# Monitor - RAM
sketchybar -m --add item ram_label right                                \
              --set ram_label     label.font="$HELVETICA_S"             \
                                  label=RAM                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item ram_percent right                              \
              --set ram_percent   label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/ram.sh"

# Monitor - CPU
sketchybar -m --add item cpu_label right                                \
              --set cpu_label     label.font="$HELVETICA_S"             \
                                  label=CPU                             \
                                  y_offset=6                            \
                                  width=0                               \
              --add item cpu_percent right                              \
              --set cpu_percent   label.font="$HELVETICA_S"             \
                                  y_offset=-4                           \
                                  update_freq=1                         \
                                  script="~/.config/sketchybar/plugins/cpu.sh"

# Weather
sketchybar -m --add item weather right                                             \
              --set weather       update_freq=600                                  \
                                  icon.padding_right=4                             \
                                  script="~/.config/sketchybar/plugins/weather.sh" \
                                  icon.font="$NERD_FONT"

###################### CENTER ITEMS ###################
# Window title bar
sketchybar --add item  system.label       center                                 \
           --set       system.label       label=Window                         \
                                          script="~/.config/sketchybar/plugins/window_title.sh" \
           --subscribe system.label       front_app_switched display_change window_focus space_change title_change

# Yabai stack indicator
sketchybar -m --add       item           stack center                                          \
              --set       stack          script="~/.config/sketchybar/plugins/stack.sh"        \
              --subscribe stack          window_focus front_app_switched space_change title_change \
              --set       stack          drawing=on                                            \
              --set       stack          update_freq=0                                         \
              --set       stack          background.padding_left=0

############## TEST ITEMS ##############
# Battery alias
#sketchybar -m --add alias "Control Center,Battery" left \
#              --set "Control Center,Battery" update_freq=2

############## FINALIZING THE SETUP ##############
sketchybar -m --update

echo "sketchybar configuration loaded.."
